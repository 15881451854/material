## Vue 路由
> 通过 URL 映射到对应的功能实现

1. 引入 vue.js
2. 引入 vue-router.js
3. 让vue使用vueRouter, `vue.use(vueRouter)`
4. 创建路由对象，配置路由对象
5. 将配置好的路由对象关联到vue的实例化对象中

        <div id="app">
            <router-link to="/foo">foo</router-link>
            <router-link to="/bar">bar</router-link>
            <router-view></router-view>
        </div>

        <script>
            var foo = {template: "<h1>foo</h1>"};
            var bar = {template: "<h1>bar</h1>"};
            var routes = [
                {path: "/foo", component: foo},
                {path: "/bar", component: bar},
            ];

            var router = new VueRouter({
                routes: routes
            })

            var vm = new Vue({
                el: '#app',
                router: router
            })
        </script>

* router-link: 组件导航, to 属性指定链接, 解析为a标签
* router-view: 路由匹配的组件在此处渲染

#### 路由参数

* 在path后面加`/:xx`
* 通过对象 **$route.params.xx** 来获取参数

        <div id="app">
            <router-link to="/foo/params">foo</router-link>
            <router-link to="/bar">bar</router-link>
            <router-view></router-view>
        </div>

        <script>
            var foo = {template: "<h1>foo{{$route.params.userid}}</h1>"};
            var bar = {template: "<h1>bar</h1>"};
            var routes = [
                {path: "/foo/:userid", component: foo},
                {path: "/bar", component: bar},
            ];

            var router = new VueRouter({
                routes: routes
            })

            var vm = new Vue({
                el: '#app',
                router: router
            })
        </script>

###### Router-link跳转路径的书写的几种方式

* 直接书写路径`<router-link to="/about"></router-link>`
* 动态指定`<router-link :to="{path:'about'}"></router-link>`
* 通过name动态绑定，防止路径过长`<router-link :to="{name:'about',params:{userId:123}}"></router-link>`

#### 嵌套路由
> 嵌套路由路径不用写 "/"

    <div id="app">
        <router-link to="/foo">foo</router-link>
        <router-link to="/bar">bar</router-link>
        <router-view></router-view>
    </div>

    <script>
        var foo = {
            template: `<div>
                            <h1>foo</h1>
                            <router-link to="/foo/bar1">bar1</router-link>
                            <router-view></router-view>
                        </div>`
        };
        var bar = { template: "<h1>bar</h1>" };
        var routes = [
            {
                path: "/foo",
                component: foo,
                children: [{
                    path: "bar1",     // 子路由路径不用写"/"
                    component: bar
                }]
            },
            { path: "/bar", component: bar },
        ];

        var router = new VueRouter({
            routes: routes
        })

        var vm = new Vue({
            el: '#app',
            router: router
        })
    </script>

#### 路由重定向
> 默认渲染的路由

        var router = new VueRouter({
            routes:[
                {path: "/", redirect: "/home"}
            ]
        });

#### 路由源信息与路由守卫
> 在配置参数里面添加meta对象，可以用来做权限控制

* beforeEach()一定要有next()
* next()可以写路由跳转，`next({path: "/login"})`

        var router = new VueRouter({
            routes:[
                {path: "/login", name: "login", component: loginConponent, meta: {isLogin: true}},   // 路由源信息
            ]
        });
        router.beforeEach((from, to, next) => {   // 路由守卫
            next()
        })

#### 编程式导航
> 用 javascript 跳转路由

* 用 `router-link` 组件进行跳转
`<router-link to="/floor1">一楼</router-link>`

* 编程式导航1：\$router.replace
`<input type="button" value="一楼" @click="$router.replace('/floor1')">`

* 编程式导航2：\$router.push()
`<input type="button" value="一楼" @click="$router.push('/floor1')">`

* 编程式导航3：\$router.push({})
`<input type="button" value="一楼" @click="$router.push({path: '/floor1'})">`

* 编程式导航4：\$router.push({}) 传参数 #/floor1/123
`<input type="button" value="一楼" @click="$router.push({name: 'floor1', params: {id: 123}})">`

* 编程式导航5：\$router.push({}) 传参数 #/floor1?id=123
`<input type="button" value="一楼" @click="$router.push({path: '/floor1', query: {id: 123}})">`
 
###### push与replace的区别

* push
    1. `<router-link :to="...">` 等同于调用 router.push(...)
    2. 由于动态路由也是传递params的，所以在 this.$router.push() 方法中 path不能和params一起使用，否则params将无效。需要用name来指定页面
    3. 在目标页面通过this.$route.params.xxx获取参数
* replace
    1. 在目标页面通过this.$route.query.xxx

#### 命名路由
> 在路由映射表中添加属性 name，用以对该路由映射规则命名，在编程式导航跳转路由时可以用 router.push({name: '名称'}), 建议每次都写上name

        var routes = [
            {
                path: "/foo/:id",
                name:"foo",
                component: foo,
                children: [{
                    path: "bar1",
                    component: bar
                }]
            },
            { path: "/bar", component: bar },
        ];

#### 命名视图

    <div id="app">
        <h1>Hello VueRouter</h1>
        <p>
            <router-view></router-view>
            <router-view name="a"></router-view>
            <router-view name="b"></router-view>
        </p>
    </div>
    const router = new VueRouter({
        routes: [
            {
                path: '/',
                components: {
                    default: {
                        template: '<h1>defalut router view</h1>'
                    },
                    a: {
                        template: '<h1>a router view</h1>'
                    },
                    b: {
                        template: '<h1>b router view</h1>'
                    }
                }
            }
        ]
    })
    new Vue({
        el: '#app',
        router
    })

> default 默认在router-view渲染, 同slot

#### keep-alive
> 内置组件，缓存组件

*一辈子很短，努力的做好两件事就好；第一件事是热爱生活，好好的去爱身边的人；第二件事是努力学习，在工作中取得不一样的成绩，实现自己的价值。*